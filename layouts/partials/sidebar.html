<aside id="sidebar" class="border-end position-relative d-none d-xl-block">
  
  <div class="px-4 py-2">
    {{ $selected_dialect := index (split .RelPermalink "/") 1 }}
    {{ range .Site.Sections }}
      {{ $dialect := .Title }}
      {{ $dialectURL := $dialect | printf "/%s" }}
      <div class="form-check form-switch">
        <label class="form-check-label" for="flexSwitchCheckDefault">Toggle Display</label>
        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
      </div>
      <ul class="nav flex-column text-nowrap mb-4 keyword-list">
        {{ range sort .Sections "Params.index" "asc" }}
        <li class="nav-item">
          {{ $vocabulary := .Title }}
          {{ $vocabularyURL := (replace $vocabulary " " "-") | lower | printf "%s/%s" $dialectURL }}
          <details open>
            <summary class="ps-0 nav-link text-body">
              <i class="bi bi-chevron-down"></i>
              <a class="text-body fw-bold" href="{{ ref $ $vocabularyURL }}">{{ $vocabulary }}</a>
            </summary>
            <ul class="list-unstyled ms-3">
              {{ range sort $.Site.RegularPages "Params.index" "asc" }}
                {{ if eq .Section $dialect }}
                  {{ if eq .Parent.Title $vocabulary }}
                    {{ $keywordURL := (replace .Params.keyword "$" "") | printf "%s/%s" $vocabularyURL }}
                    <li>
                      {{ if eq $.Permalink .Permalink }}
                        <a class="text-muted fw-bold text-decoration-none font-monospace active" href="{{ ref $ $keywordURL }}" aria-current="true">{{ .Params.keyword }}</a>
                      {{ else }}
                        <a class="text-black-50 text-decoration-none font-monospace" href="{{ ref $ $keywordURL }}">{{ .Params.keyword }}</a>
                      {{ end }}
                    </li>
                  {{ end }}
                {{ end }}
              {{ end }}
            </ul>
          </details>
        </li>
        {{ end }}
      </ul>
      <ul class="list-unstyled ms-3 pt-2">
        {{ range sort $.Site.RegularPages "Params.keyword" "asc" }} 
          {{ if eq .Section $dialect }} 
            {{ $vocabulary := .Parent.Title }} 
            {{ $vocabularyURL := (replace $vocabulary " " "-") | lower | printf "%s/%s" $dialectURL }} 
            {{ $keywordURL := (replace .Params.keyword "$" "") | printf "%s/%s" $vocabularyURL }}
            <li>
              {{ if eq $.Permalink .Permalink }}
              <a
                class="text-muted fw-bold text-decoration-none font-monospace active"
                href="{{ ref $ $keywordURL }}"
                aria-current="true">{{ .Params.keyword }}</a>
              {{ else }}
              <a
                class="text-black-50 text-decoration-none font-monospace"
                href="{{ ref $ $keywordURL }}">{{ .Params.keyword }}</a>
              {{ end }}
            </li>
          {{ end }} 
        {{ end }}
      </ul>
    {{ end }}
  </div>
</aside>
